<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    
  <!-- Begin Page

  <div class="container">
    <h5>Mileage Tracker</h5>

    <form id="form" class="submit-form" autocomplete="off">

        <div class="wrapper">
            <div class="box">
            <input type ="date" name="Date" id="date" required>            
            </div>
        </div><br/>

        <div class="wrapper">
            <div class="box">
            <input type ="text" name="Description" id="description" placeholder="Description" required>           
            </div><br/>
        </div>
        
        <div class="wrapper">
            <div class="box">
            <input type="text" name="Dest Begin" id="dest-begin" placeholder="Dest Begin" required>
            </div><br/>
        </div>

        <div class="wrapper">
            <div class="box">
            <input type="text" name="Dest End" id="dest-end" placeholder="Dest End" required>
            </div><br/>
        </div>

        <div class="wrapper">
            <div class="box">
            <input type="number" name="ODM Begin" id="odm-begin" placeholder="ODM Begin" required>
            </div><br/>
        </div>

        <div class="wrapper">
            <div class="box">
            <input type="number" name="ODM End" id="odm-end" placeholder="ODM End" required>
            </div><br/>
        </div>

        <div class="wrapper">
            <div class="box">
            <input type="number" name="Miles" id="results" placeholder="Mileage" required>
            </div>
        </div><br/>
        
        <input type="submit" name="" id="submit-btn" value="Submit">
    </form>
  </div>
  
  End Page -->  

    <!-- Append to Google Forms -->
    <script>
        const scriptURL = 'google_script_url'
        const form = document.querySelector('#form')

        // math for odometer reading
        odmBegin = document.getElementById("odm-begin");
        odmEnd = document.getElementById("odm-end");

        odmEnd.onkeyup=function () {
            let num_math = 0;
            let num_string = 0;
            
            // odm-begin - odm-end =;
            num_math = odmBegin.value - odmEnd.value;
            num_string = num_math;
            document.getElementById("results").value = num_string;
        }

        // submit form
        form.addEventListener('submit', e => {
            e.preventDefault()

            console.log(form)            
            fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                .then(response => { alert('Success!', response) })
                .catch(error => alert('Error!', error.message))
            form.reset();
        })
    </script>


</body>
</html>
